{"ast":null,"code":"var _jsxFileName = \"/home/martin/Desktop/IronHack/storyboard/storyboard-client/client/src/App.js\";\nimport React from \"react\";\nimport { Switch } from \"react-router-dom\";\nimport LoadingComponent from \"./components/Loading\";\nimport Navbar from \"./components/Navbar/Navbar\";\nimport HomePage from \"./pages/HomePage\";\nimport LogIn from \"./pages/LogIn\";\nimport ProtectedPage from \"./pages/ProtectedPage\";\nimport Signup from \"./pages/Signup\";\nimport NormalRoute from \"./routing-components/NormalRoute\";\nimport ProtectedRoute from \"./routing-components/ProtectedRoute\";\nimport { getLoggedIn, logout } from \"./services/auth\";\nimport * as PATHS from \"./utils/paths\";\nimport * as CONSTS from \"./utils/consts\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: null,\n      isLoading: true\n    };\n\n    this.componentDidMount = () => {\n      const accessToken = localStorage.getItem(CONSTS.ACCESS_TOKEN);\n\n      if (!accessToken) {\n        return this.setState({\n          isLoading: false\n        });\n      }\n\n      getLoggedIn(accessToken).then(res => {\n        if (!res.status) {\n          console.log(\"RES IN CASE OF FAILURE\", res); // deal with failed backend call\n\n          return this.setState({\n            isLoading: false\n          });\n        }\n\n        this.setState({\n          user: res.data.user,\n          isLoading: false\n        });\n      });\n    };\n\n    this.handleLogout = () => {\n      const accessToken = localStorage.getItem(CONSTS.ACCESS_TOKEN);\n\n      if (!accessToken) {\n        return this.setState({\n          user: null,\n          isLoading: false\n        });\n      }\n\n      this.setState({\n        isLoading: true\n      }, () => {\n        logout(accessToken).then(res => {\n          if (!res.status) {\n            // deal with error here\n            console.error(\"ðŸ’¡ SOMETHING HAPPENED THAT HAS TO DEALT WITH\", res);\n          }\n\n          localStorage.removeItem(CONSTS.ACCESS_TOKEN);\n          return this.setState({\n            isLoading: false,\n            user: null\n          });\n        });\n      });\n    };\n\n    this.authenticate = user => {\n      this.setState({\n        user\n      });\n    };\n  }\n\n  render() {\n    if (this.state.isLoading) {\n      return /*#__PURE__*/_jsxDEV(LoadingComponent, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {\n        handleLogout: this.handleLogout,\n        user: this.state.user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(NormalRoute, {\n          exact: true,\n          path: PATHS.HOMEPAGE,\n          component: HomePage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NormalRoute, {\n          exact: true,\n          path: PATHS.SIGNUPPAGE,\n          authenticate: this.authenticate,\n          component: Signup\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NormalRoute, {\n          exact: true,\n          path: PATHS.LOGINPAGE,\n          authenticate: this.authenticate,\n          component: LogIn\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          exact: true,\n          path: PATHS.PROTECTEDPAGE,\n          component: ProtectedPage,\n          user: this.state.user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/martin/Desktop/IronHack/storyboard/storyboard-client/client/src/App.js"],"names":["React","Switch","LoadingComponent","Navbar","HomePage","LogIn","ProtectedPage","Signup","NormalRoute","ProtectedRoute","getLoggedIn","logout","PATHS","CONSTS","App","Component","state","user","isLoading","componentDidMount","accessToken","localStorage","getItem","ACCESS_TOKEN","setState","then","res","status","console","log","data","handleLogout","error","removeItem","authenticate","render","HOMEPAGE","SIGNUPPAGE","LOGINPAGE","PROTECTEDPAGE"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Switch } from \"react-router-dom\";\nimport LoadingComponent from \"./components/Loading\";\nimport Navbar from \"./components/Navbar/Navbar\";\nimport HomePage from \"./pages/HomePage\";\nimport LogIn from \"./pages/LogIn\";\nimport ProtectedPage from \"./pages/ProtectedPage\";\nimport Signup from \"./pages/Signup\";\nimport NormalRoute from \"./routing-components/NormalRoute\";\nimport ProtectedRoute from \"./routing-components/ProtectedRoute\";\nimport { getLoggedIn, logout } from \"./services/auth\";\nimport * as PATHS from \"./utils/paths\";\nimport * as CONSTS from \"./utils/consts\";\n\nclass App extends React.Component {\n  state = {\n    user: null,\n    isLoading: true,\n  };\n\n  componentDidMount = () => {\n    const accessToken = localStorage.getItem(CONSTS.ACCESS_TOKEN);\n    if (!accessToken) {\n      return this.setState({\n        isLoading: false,\n      });\n    }\n    getLoggedIn(accessToken).then((res) => {\n      if (!res.status) {\n        console.log(\"RES IN CASE OF FAILURE\", res);\n        // deal with failed backend call\n        return this.setState({\n          isLoading: false,\n        });\n      }\n      this.setState({\n        user: res.data.user,\n        isLoading: false,\n      });\n    });\n  };\n\n  handleLogout = () => {\n    const accessToken = localStorage.getItem(CONSTS.ACCESS_TOKEN);\n    if (!accessToken) {\n      return this.setState({\n        user: null,\n        isLoading: false,\n      });\n    }\n    this.setState(\n      {\n        isLoading: true,\n      },\n      () => {\n        logout(accessToken).then((res) => {\n          if (!res.status) {\n            // deal with error here\n            console.error(\"ðŸ’¡ SOMETHING HAPPENED THAT HAS TO DEALT WITH\", res);\n          }\n\n          localStorage.removeItem(CONSTS.ACCESS_TOKEN);\n          return this.setState({\n            isLoading: false,\n            user: null,\n          });\n        });\n      }\n    );\n  };\n\n  authenticate = (user) => {\n    this.setState({\n      user,\n    });\n  };\n\n  render() {\n    if (this.state.isLoading) {\n      return <LoadingComponent />;\n    }\n\n    return (\n      <div className=\"App\">\n        <Navbar handleLogout={this.handleLogout} user={this.state.user} />\n        <Switch>\n          <NormalRoute exact path={PATHS.HOMEPAGE} component={HomePage} />\n          <NormalRoute\n            exact\n            path={PATHS.SIGNUPPAGE}\n            authenticate={this.authenticate}\n            component={Signup}\n          />\n          <NormalRoute\n            exact\n            path={PATHS.LOGINPAGE}\n            authenticate={this.authenticate}\n            component={LogIn}\n          />\n          <ProtectedRoute\n            exact\n            path={PATHS.PROTECTEDPAGE}\n            component={ProtectedPage}\n            user={this.state.user}\n          />\n        </Switch>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}